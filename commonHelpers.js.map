{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `\n  <li class=\"gallery-card\">\n  <div class=\"container-el\">\n  <div class=\"container-img\">\n    <a href=\"${imgInfo.largeImageURL}\"><img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" /></a>\n  </div>  <div class=\"container-text\">\n      <p class=\"text-name\">Likes <span class=\"span-numbers\">${imgInfo.likes}</span></p>\n      <p class=\"text-name\">Views <span class=\"span-numbers\">${imgInfo.views}</span></p>\n      <p class=\"text-name\">Comments <span class=\"span-numbers\">${imgInfo.comments}</span></p>\n      <p class=\"text-name\">Downloads <span class=\"span-numbers\">${imgInfo.downloads}</span></p>\n    </div>\n  </div>\n</li>\n  `;\n};","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotos = async(inputValue, page) => {\n  const photosParams = {\n  params: {\n            key: \"45423395-a55c580a59309a3b931c40bb9\",\n            q: inputValue,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n          safesearch: true,\n          page: page,\n          per_page: 15,            \n        }\n}\n    return axios.get('/api/', photosParams);\n}\n\n","\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { createGalleryCardTemplate } from './js/render-functions.js'\nimport { fetchPhotos } from './js/pixabay-api.js'\n\nconst formEl = document.querySelector('.js-form');\nconst listEl = document.querySelector('.list-photo');\nconst loaderEl = document.querySelector('.js-loader');\nconst btnLoadMore = document.querySelector('.js-btn-load-more');\n\n\nlet currentPage = 1;\nlet inputValue = '';\nlet cardHeight = 0;\n\nconst formSubmit = async event=> {\n  try {\n    event.preventDefault();\n\n    inputValue = formEl.elements.img.value.trim();\n    currentPage = 1;\nif (inputValue === \"\") {\n      iziToast.error({\n        message: 'Please enter a search term.',\n      });\n      return\n    }\nformEl.reset();\n        loaderEl.classList.remove('is-hidden');\n    const response = await fetchPhotos(inputValue, currentPage);\n    \n        if (response.data.hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      listEl.innerHTML = '';\n          formEl.reset();\n          btnLoadMore.classList.add('is-hidden');\n          return;\n    }\n\n    const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n\n    listEl.innerHTML = galleryCardsTemplate;\n\n    const galleryLiEl = listEl.querySelector('li');\n    cardHeight = galleryLiEl.getBoundingClientRect().height;\n        newSimple.refresh();\n    loaderEl.classList.add('is-hidden');\n    btnLoadMore.classList.remove('is-hidden');\n  }\n  catch (error) {\n    console.log(error);\n  }\n  finally { loaderEl.classList.add('is-hidden'); }\n}\n\nconst buttonClickForLoad = async event => {\n  try {\n    loaderEl.classList.remove('is-hidden');\n    currentPage++;\n    const response = await fetchPhotos(inputValue, currentPage);\n    const galleryCardsTemplate = response.data.hits.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n    listEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    })\n\n    // if (response.data.hits.length === 0) {\n    if (listEl.children.length >= response.data.totalHits) {\n      btnLoadMore.classList.add('is-hidden');\n       iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      return\n    }\n    newSimple.refresh();\n  } catch (error) {\n    console.log(error); \n  } finally { loaderEl.classList.add('is-hidden'); }\n}\n\nconst newSimple = new SimpleLightbox('.container-img a', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n\n});\n\nformEl.addEventListener('submit', formSubmit);\nbtnLoadMore.addEventListener('click', buttonClickForLoad)\n\n// const emptyEl = document.querySelector('.js-empty-el');\n// const observedOptions = {\n//   root: null,\n//   rootMargin: '0px 0px 400px 0px',\n//   threshold: 1,\n// }\n// const observedCallBack = entries => {\n//   if (entries[0].isIntersecting) {\n//     console.log('Hello');\n//   }\n// }\n// const observer = new IntersectionObserver(observedCallBack, observedOptions);\n// observer.observe(emptyEl);"],"names":["createGalleryCardTemplate","imgInfo","axios","fetchPhotos","inputValue","page","photosParams","formEl","listEl","loaderEl","btnLoadMore","currentPage","cardHeight","formSubmit","event","iziToast","response","galleryCardsTemplate","imgDetails","newSimple","error","buttonClickForLoad","SimpleLightbox"],"mappings":"owBAAO,MAAMA,EAA4BC,GAChC;AAAA;AAAA;AAAA;AAAA,eAIMA,EAAQ,aAAa,mCAAmCA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA,8DAEnDA,EAAQ,KAAK;AAAA,8DACbA,EAAQ,KAAK;AAAA,iEACVA,EAAQ,QAAQ;AAAA,kEACfA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,ICRnFC,EAAM,SAAS,QAAU,sBAElB,MAAMC,EAAc,MAAMC,EAAYC,IAAS,CACpD,MAAMC,EAAe,CACrB,OAAQ,CACE,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACf,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACT,EACI,OAAOH,EAAM,IAAI,QAASI,CAAY,CAC1C,ECVMC,EAAS,SAAS,cAAc,UAAU,EAC1CC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAc,SAAS,cAAc,mBAAmB,EAG9D,IAAIC,EAAc,EACdP,EAAa,GACbQ,EAAa,EAEjB,MAAMC,EAAa,MAAMC,GAAQ,CAC/B,GAAI,CAKN,GAJIA,EAAM,eAAc,EAEpBV,EAAaG,EAAO,SAAS,IAAI,MAAM,KAAI,EAC3CI,EAAc,EACdP,IAAe,GAAI,CACjBW,EAAS,MAAM,CACb,QAAS,6BACjB,CAAO,EACD,MACD,CACLR,EAAO,MAAK,EACJE,EAAS,UAAU,OAAO,WAAW,EACzC,MAAMO,EAAW,MAAMb,EAAYC,EAAYO,CAAW,EAEtD,GAAIK,EAAS,KAAK,KAAK,SAAW,EAAG,CACvCD,EAAS,MAAM,CACb,QAAS,0EACjB,CAAO,EACDP,EAAO,UAAY,GACfD,EAAO,MAAK,EACZG,EAAY,UAAU,IAAI,WAAW,EACrC,MACL,CAED,MAAMO,EAAuBD,EAAS,KAAK,KAAK,IAAIE,GAAclB,EAA0BkB,CAAU,CAAC,EAAE,KAAK,EAAE,EAEhHV,EAAO,UAAYS,EAGnBL,EADoBJ,EAAO,cAAc,IAAI,EACpB,sBAAuB,EAAC,OAC7CW,EAAU,QAAO,EACrBV,EAAS,UAAU,IAAI,WAAW,EAClCC,EAAY,UAAU,OAAO,WAAW,CACzC,OACMU,EAAO,CACZ,QAAQ,IAAIA,CAAK,CAClB,QACO,CAAEX,EAAS,UAAU,IAAI,WAAW,CAAI,CAClD,EAEMY,EAAqB,MAAMP,GAAS,CACxC,GAAI,CACFL,EAAS,UAAU,OAAO,WAAW,EACrCE,IACA,MAAMK,EAAW,MAAMb,EAAYC,EAAYO,CAAW,EACpDM,EAAuBD,EAAS,KAAK,KAAK,IAAIE,GAAclB,EAA0BkB,CAAU,CAAC,EAAE,KAAK,EAAE,EAShH,GARAV,EAAO,mBAAmB,YAAaS,CAAoB,EAE3D,SAAS,CACP,IAAKL,EAAa,EAClB,SAAU,QAChB,CAAK,EAGGJ,EAAO,SAAS,QAAUQ,EAAS,KAAK,UAAW,CACrDN,EAAY,UAAU,IAAI,WAAW,EACpCK,EAAS,MAAM,CACd,QAAS,4DACjB,CAAO,EACD,MACD,CACDI,EAAU,QAAO,CAClB,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,QAAA,CAAWX,EAAS,UAAU,IAAI,WAAW,CAAI,CACpD,EAEMU,EAAY,IAAIG,EAAe,mBAAoB,CACvD,SAAU,GACV,aAAc,MACd,gBAAiB,SACjB,aAAc,GAEhB,CAAC,EAEDf,EAAO,iBAAiB,SAAUM,CAAU,EAC5CH,EAAY,iBAAiB,QAASW,CAAkB"}